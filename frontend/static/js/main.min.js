$(function(){$(document).on("click",".addinterest",function(){let t=this.rel.split("|"),e=t[0],a=t[1];$("#setinteresttitle").text("Add interest to "+e),$("#sendinterest").attr("rel",a)}),$("#sendinterest").on("click",function(){if(null===sessionStorage.getItem("session"))alert("do login!");else{let t=$("#customeradress").val(),e=$("#customeradressnumber").val(),a=$("#customeremail").val(),s=$("#customerphone").val(),r=JSON.parse(sessionStorage.session).id,d=$("#sendinterest").attr("rel"),n=JSON.stringify({adress:t,adress_number:e,email:a,phone:s,customer_id:r,vehicle_id:d});$.ajax({url:"http://localhost:5000/addInterest",method:"POST",dataType:"json",contentType:"application/json",data:n,success:function(t){"ok"===t.result?alert("Your interest has been saved, we will contact you shortly"):console.log(t)},error:function(t){console.log(t)}})}}),$("#sendregistercustomer").on("click",function(){let t=$("#registercustomername").val(),e=$("#registercustomerage").val(),a=$("#registercustomercpf").val(),s=$("#registercustomeremail").val(),r=$("#registercustomerpassword").val(),d=JSON.stringify({name:t,age:e,cpf:a,email:s,password:r});$.ajax({url:"http://localhost:5000/addCustomer",method:"POST",dataType:"json",contentType:"application/json",data:d,success:function(t){console.log(t)},error:function(t){console.log(t)}})}),$.ajax({url:"http://192.168.1.3:5000/listCars",method:"GET",dataType:"json",success:function(t){t.details.map(t=>{let e=$("<div></div>").addClass("card").attr("style","width: 18rem;"),a=$("<img>").attr("src","http://192.168.1.3:5000/get_image/"+t.id),s=$("<div></div>").addClass("card-body"),r=$("<h5></h5>").addClass("card-title").text(t.name),d=$("<p></p>").addClass("card-text").text("R$ "+t.price),n=$("<p></p>").addClass("card-text").text(t.mileage+" Km"),i=$("<a></a>").attr("href","#").addClass("btn btn-primary addinterest").text("I have interest").attr("data-bs-toggle","modal").attr("data-bs-target","#setinterest").attr("rel",t.name+"|"+t.id);s.append(r),s.append(d),s.append(n),s.append(i),e.append(a),e.append(s),$("#cars").append(e)})},error:function(){$("#cars").append($("<h3></h3>").text("Nothing to see here... :("))}}),$.ajax({url:"http://192.168.1.3:5000/listMotorcycles",method:"GET",dataType:"json",success:function(t){t.details.map(t=>{let e=$("<div></div>").addClass("card").attr("style","width: 18rem;"),a=$("<img>").attr("src","http://192.168.1.3:5000/get_image/"+t.id),s=$("<div></div>").addClass("card-body"),r=$("<h5></h5>").addClass("card-title").text(t.name),d=$("<p></p>").addClass("card-text").text("R$ "+t.price),n=$("<p></p>").addClass("card-text").text(t.mileage+" Km"),i=$("<a></a>").attr("href","#").addClass("btn btn-primary addinterest").text("I have interest").attr("id","addinterest").attr("data-bs-toggle","modal").attr("data-bs-target","#setinterest").attr("rel",t.name+"|"+t.id);s.append(r),s.append(d),s.append(n),s.append(i),e.append(a),e.append(s),$("#motorcycles").append(e)})},error:function(){$("#motorcycles").append($("<h3></h3>").text("Nothing to see here... :("))}}),$("#sendlogin").on("click",function(){let t=$("#customername").val(),e=$("#customeremaillogin").val(),a=$("#customerpassword").val(),s=JSON.stringify({name:t,email:e,password:a});$.ajax({url:"http://localhost:5000/validate_login",method:"POST",contentType:"application/json",dataType:"json",data:s,success:function(t){"ok"===t.result?(sessionStorage.setItem("session",JSON.stringify(t.details)),sessionStorage.setItem("token",t.token),alert("Login approved"),$("#loginmodal").modal("hide")):alert(t.details)},error:function(t){alert(t.details)}})})});